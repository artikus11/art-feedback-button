MicroModal.init();const AFB_triggerEvent=(e,t,o)=>{const n=new CustomEvent(`afb_${t}`,{bubbles:!0,detail:o});"string"==typeof e&&(e=document.querySelector(e)),e.dispatchEvent(n)};function AFB_viewModal(e,t){return fetch(e,t).then(function(e){return 200!==e.status?Promise.reject(new Error(e.statusText)):Promise.resolve(e)}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){console.log("error",e)})}function AFB_sendForm(e,t,o,n){e.addEventListener("submit",function(s){s.preventDefault();const r=new FormData(e),a=e.getAttribute("action");t.setAttribute("disabled","disabled"),o.classList.add("preload"),(async()=>{let s=await fetch(a,{method:"POST",body:r}),c=await s.json();if(o.classList.remove("preload"),t.removeAttribute("disabled"),!1===s.ok){let t=c.message;for(let n in t){let s=o.querySelector('label[for="'+n+'"]');405===c.data.status&&(s=e),s.insertAdjacentHTML("beforeend",'<span class="error">'+t[n]+"</span>")}setTimeout(function(){o.querySelectorAll(".error").forEach(function(e,t,o){e.remove()})},5e3)}"success"===c.status&&(AFB_triggerEvent(e,"send_success",c),n.innerHTML="",n.insertAdjacentHTML("afterend",'<span class="success">'+c.message+"</span>"),setTimeout(function(){MicroModal.close("afb-modal")},3e3))})()})}function AFB_modalShow(){MicroModal.show("afb-modal",{debugMode:!0,disableScroll:!0,onShow:function(e){const t=e.querySelector("input[type=tel]");VMasker(t).maskPattern(t.dataset.mask),AFB_triggerEvent(e,"open")},onClose:function(e){AFB_triggerEvent(e,"close"),e.remove()},closeTrigger:"data-afb-close",disableFocus:!1,awaitCloseAnimation:!0})}const buttons=document.querySelectorAll(".button-shortcode-js");buttons.forEach(e=>e.addEventListener("click",function(e){let t=e.target,o=t.dataset.windowUrl,n={emails:t.dataset.afbEmails};this.setAttribute("disabled","disabled"),AFB_viewModal(o,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)}).then(function(e){document.body.insertAdjacentHTML("afterend",e.html),t.removeAttribute("disabled"),AFB_modalShow();const o=document.querySelector(".afb-modal__container"),n=document.querySelector(".afb-modal__content");AFB_sendForm(document.querySelector(".afb-modal-form"),document.querySelector(".js-send-modal-form"),o,n)})}));